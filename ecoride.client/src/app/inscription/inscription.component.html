<div style="display: flex; justify-content: center;">
  <div class="card h-100 mb-4" style="min-width: 400px; max-width: 700px; width: 100%;">
    <div class="card-header pb-0">
      <strong>Formulaire</strong>
    </div>

    <br />
    <br />

    <div class="card-body">

      <div class="mb-3">
        <a [routerLink]="['/accueil']">Retour à la page précédente</a>
      </div>

      <br />
      <br />

      <form #formRef="ngForm" (ngSubmit)="envoie()" novalidate>

        <div class="mb-3">
          <label for="nom" class="form-label">Nom : </label>
          <input type="text" id="nom" [(ngModel)]="form.nom" name="depart" class="form-control" placeholder="nom" required />
        </div>

        <div class="mb-3">
          <label for="prenom" class="form-label">Prénom : </label>
          <input type="text" id="prenom" [(ngModel)]="form.prenom" name="destination" class="form-control" placeholder="prenom" required />
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Email :</label>
          <input type="email"
                 id="email"
                 [(ngModel)]="form.email"
                 name="email"
                 class="form-control"
                 required
                 email
                 #emailCtrl="ngModel" />

          <div *ngIf="emailCtrl.invalid && (emailCtrl.dirty || emailCtrl.touched)" class="text-danger">
            <div *ngIf="emailCtrl.errors?.['required']">L'email est requis.</div>
            <div *ngIf="emailCtrl.errors?.['email']">Format d'email invalide.</div><br />
          </div>
        </div>

        <div class="mb-3">
          <label for="password" class="form-label">Mot de passe :</label>
          <input type="password"
                 id="password"
                 [(ngModel)]="form.password"
                 name="password"
                 class="form-control"
                 required
                 minlength="8"
                 pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]).{8,}$"
                 #passwordCtrl="ngModel" />

          <div *ngIf="passwordCtrl.invalid && (passwordCtrl.dirty || passwordCtrl.touched)" class="text-danger">
            <div *ngIf="passwordCtrl.errors?.['required']">Le mot de passe est requis.</div>
            <div *ngIf="passwordCtrl.errors?.['minlength']">Au moins 8 caractères.</div>
            <div *ngIf="passwordCtrl.errors?.['pattern']">
              Doit contenir une majuscule, une minuscule et un chiffre.
            </div><br />
          </div>
        </div>

        <div class="mb-3">
          <label for="telephone" class="form-label">Numéro de téléphone :</label>
          <input type="tel"
                 id="telephone"
                 [(ngModel)]="form.telephone"
                 name="telephone"
                 class="form-control"
                 required
                 pattern="^(?:\+33|0)[1-9](?:\d{2}){4}$"
                 #telCtrl="ngModel" />

          <div *ngIf="telCtrl.invalid && (telCtrl.dirty || telCtrl.touched)" class="text-danger">
            <div *ngIf="telCtrl.errors?.['required']">Le numéro de téléphone est requis.</div>
            <div *ngIf="telCtrl.errors?.['pattern']">Numéro invalide (ex: 0612345678 ou +33612345678).</div><br />
          </div>
        </div>

        <div class="mb-3 position-relative">
          <label for="adresse" class="form-label">Adresse :</label>
          <input type="text" id="adresse"
                 [formControl]="adresseCtrl"
                 [(ngModel)]="form.adresse"
                 name="adresse"
                 class="form-control"
                 placeholder="19 rue du moulin, Reims"
                 autocomplete="off"
                 required />

          <!-- Liste de suggestions -->
          <ul *ngIf="suggestions.length > 0"
              class="list-group position-absolute w-100"
              style="z-index: 1000;">
            <li *ngFor="let suggestion of suggestions"
                (click)="choisirAdresse(suggestion)"
                class="list-group-item list-group-item-action"
                style="cursor: pointer;">
              {{ suggestion }}
            </li>
          </ul>
        </div>

        <div class="mb-3">
          <label for="dateNaissance" class="form-label">Date de naissance : </label>
          <input type="date" id="dateNaissance" [(ngModel)]="form.dateNaissance" name="dateNaissance" class="form-control" placeholder="date" required />
        </div>

        <div class="mb-3">
          <label for="photo" class="form-label">Photo : </label>
          <input type="file" (change)="onFileSelected($event)" />
        </div>

        <div class="mb-3">
          <label for="pseudo" class="form-label">Pseudonyme : </label>
          <input type="text" id="pseudo" [(ngModel)]="form.pseudo" name="pseudo" class="form-control" placeholder="pseudo" required />
        </div>

        <br />
        <br />

        <button type="submit" class="btn btn-primary" [disabled]="!formRef.form.valid">Envoyer</button>
      </form>
    </div>
  </div>
</div>

